{% comment %}Language switcher link with i18n support{% endcomment %}
{% if page.lang == "en" %}
  {% if page.i18n_ja %}
    <a class="lang-link" href="{{ page.i18n_ja | relative_url }}">JP</a>
  {% else %}
    {%- assign alt_url = page.url | remove_first: '/en' | replace: '//', '/' -%}
    {%- if alt_url == '' or alt_url == '/vision/' -%}{% assign alt_url = '/' %}{% endif -%}
    <a class="lang-link" href="{{ alt_url | relative_url }}">JP</a>
  {% endif %}
{% else %}
  {% if page.i18n_en %}
    <a class="lang-link" href="{{ page.i18n_en | relative_url }}">EN</a>
  {% else %}
    {%- if page.url == '/' or page.url == '/vision/' -%}
      {%- assign alt_url = '/en/' -%}
    {%- else -%}
      {%- assign alt_url = '/en' | append: page.url | replace: '//', '/' -%}
    {%- endif -%}
    <a class="lang-link" href="{{ alt_url | relative_url }}">EN</a>
  {% endif %}
{% endif %}