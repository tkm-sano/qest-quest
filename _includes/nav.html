<nav id="site-nav" class="nav-menu">
  <button class="nav-toggle" aria-label="Toggle navigation" aria-controls="nav-list" aria-expanded="false">
    <span class="nav-toggle-bar"></span>
    <span class="nav-toggle-bar"></span>
    <span class="nav-toggle-bar"></span>
  </button>
  <div class="lang-switch-mobile">
    {% include lang_switch.html %}
  </div>
  <ul id="nav-list" class="nav-horizontal">
    {%- assign nav_pages = site.pages
         | where_exp: "p", "p.nav_order"
         | where: "lang", page.lang
         | sort: "nav_order" -%}
    {%- for page in nav_pages -%}
      <li>
        {% assign nav_key = 'nav_' | append: page.title | downcase %}
        {% if site.data.i18n[page.lang][nav_key] %}
          <a href="{{ page.url | relative_url }}">{{ site.data.i18n[page.lang][nav_key] }}</a>
        {% else %}
          <a href="{{ page.url | relative_url }}">{{ page.title }}</a>
        {% endif %}
      </li>
    {%- endfor -%}
        <li class="lang-switch-item">
      {% include lang_switch.html %}
    </li>
  </ul>
</nav>
<style>
  /* Mobile-only visibility: hide list until opened, show toggle */
  @media (max-width: 900px) {
    #site-nav .nav-toggle {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 44px;
      height: 44px;
      cursor: pointer;
    }
    #site-nav #nav-list {
      display: none;
    }
    #site-nav #nav-list.is-open {
      display: block;
    }
  }
</style>
<script>
  (function () {
    var nav = document.getElementById('site-nav');
    if (!nav) return;
    var btn = nav.querySelector('.nav-toggle');
    var list = nav.querySelector('#nav-list');
    if (!btn || !list) return;
    btn.addEventListener('click', function () {
      var open = list.classList.toggle('is-open');
      btn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
  })();
</script>