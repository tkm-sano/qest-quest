%% ------------------------------------------------------------
%%  量子コンピュータ版：技術レイヤー × 社会ベースレイヤー
%% ------------------------------------------------------------

flowchart TB

%% === レイヤー間相互作用 ===
subgraph interplay["レイヤー間相互作用"]
    compID(("コンピュータレイヤー")) -- "技術変化波及" --> baseID(("ベースレイヤー"));
end

%% === コンピュータレイヤー（技術階層） ===
subgraph compLayer["コンピュータレイヤー（技術階層）"]
  direction TB
  C1["1. 物理層<br/>- 古典: 電子回路<br/>- 量子: 量子ビット / 重ね合わせ / 量子もつれ"] --> C2["2. データ・リンク層<br/>- 古典: ビット転送<br/>- 量子: 量子情報伝送 / 量子テレポーテーション"];
  C2["2. データ・リンク層<br/>- 古典: ビット転送<br/>- 量子: 量子情報伝送 / 量子テレポーテーション"] --> C3["3. 媒体アクセス制御副層<br/>- 古典: MAC 層プロトコル<br/>- 量子: 量子リピーター / 量子メモリ"];
  C3["3. 媒体アクセス制御副層<br/>- 古典: MAC 層プロトコル<br/>- 量子: 量子リピーター / 量子メモリ"] --> C4["4. ネットワーク層<br/>- 古典: IP プロトコル<br/>- 量子: 量子インターネットプロトコル"];
  C4["4. ネットワーク層<br/>- 古典: IP プロトコル<br/>- 量子: 量子インターネットプロトコル"] --> C5["5. トランスポート層<br/>- 古典: TCP / UDP<br/>- 量子: 量子状態転送プロトコル"];
  C5["5. トランスポート層<br/>- 古典: TCP / UDP<br/>- 量子: 量子状態転送プロトコル"] --> C6["6. アプリケーション層<br/>- 古典: 通常アプリ<br/>- 量子: 量子アルゴリズム / 量子機械学習"];
  C6["6. アプリケーション層<br/>- 古典: 通常アプリ<br/>- 量子: 量子アルゴリズム / 量子機械学習"] --> C7["7. ネットワーク・セキュリティ<br/>- 古典: 暗号化<br/>- 量子: 量子暗号 / 量子鍵配送"];
end

%% === ベースレイヤー（社会階層） ===
subgraph baseLayer["ベースレイヤー（社会階層）"]
  direction TB
  B1["1. NATURE<br/>自然・物理法則<br/>- 量子物理学の再認識<br/>- 新たな物質科学"] --> B2["2. CULTURE<br/>文化・認識<br/>- 量子的思考の普及<br/>- 不確実性の文化的受容"];
  B2["2. CULTURE<br/>文化・認識<br/>- 量子的思考の普及<br/>- 不確実性の文化的受容"] --> B3["3. GOVERNANCE<br/>統治・制度<br/>- 量子セキュリティ規制<br/>- 量子技術格差への対応"];
  B3["3. GOVERNANCE<br/>統治・制度<br/>- 量子セキュリティ規制<br/>- 量子技術格差への対応"] --> B4["4. INFRASTRUCTURE<br/>基盤・インフラ<br/>- 量子通信網<br/>- 量子クラウド"];
  B4["4. INFRASTRUCTURE<br/>基盤・インフラ<br/>- 量子通信網<br/>- 量子クラウド"] --> B5["5. COMMERCE<br/>商業・経済<br/>- 量子コンピューティングサービス<br/>- 新暗号通貨"];
  B5["5. COMMERCE<br/>商業・経済<br/>- 量子コンピューティングサービス<br/>- 新暗号通貨"] --> B6["6. FASHION<br/>流行・一時的現象<br/>- 量子アプリ<br/>- 量子関連消費財"];
end

%% === 変化波及の時間軸 ===
subgraph timeline["変化波及の時間軸"]
  tShort["短期"] --> tMid["中期"];
  tMid["中期"] --> tLong["長期"];
end

%% --- 短期・中期・長期 各期の具体像 ---
subgraph shortTerm["短期変化: 5-10年"]
    direction TB
    S1["物理層 / データ層の進化<br/>- 量子ビット安定化<br/>- 低エラー率量子回路"]
    S2["アプリケーション層変化<br/>- 古典アルゴリズム代替<br/>- 暗号解読リスク顕在化"]
    S3["COMMERCE 変化<br/>- 金融市場アルゴリズム革新<br/>- 新しい暗号通貨技術"]
end

subgraph midTerm["中期変化: 10-30年"]
    direction TB
    M1["通信プロトコル変化<br/>- 量子インターネット標準化<br/>- ハイブリッド古典 / 量子ネットワーク"]
    M2["INFRASTRUCTURE 変化<br/>- 量子クラウドインフラ整備<br/>- エネルギーグリッド最適化"]
    M3["GOVERNANCE 変化<br/>- 量子技術規制枠組み確立<br/>- 量子知的財産権制度"]
end

subgraph longTerm["長期変化: 30年以上"]
    direction TB
    L1["全レイヤー量子化<br/>- 量子ネイティブソフトウェア生態系<br/>- 量子 AI の普及"]
    L2["CULTURE 変化<br/>- 量子思考の一般化<br/>- 新たな科学パラダイム"]
    L3["NATURE 理解変革<br/>- 物質 / エネルギー操作技術<br/>- 新物理学分野の出現"]
end

%% --- 変化波及の特徴的パターン ---
C1 -.-> S1;
C6 -.-> S2;
B5 -.-> S3;

C4 -.-> M1;
B4 -.-> M2;
B3 -.-> M3;

%% 「コンピュータレイヤー全体」→ L1
compID -.-> L1;     
B2     -.-> L2;
B1     -.-> L3;

%% --- スタイル定義 ---
classDef computerLayer fill:#d4f1f9,stroke:#058,stroke-width:1px
classDef baseLayer     fill:#e6f9e6,stroke:#292,stroke-width:1px
classDef shortTerm     fill:#ffe6cc,stroke:#d79b00,stroke-width:1px
classDef midTerm       fill:#fff2cc,stroke:#d6b656,stroke-width:1px
classDef longTerm      fill:#e1d5e7,stroke:#9673a6,stroke-width:1px

class C1,C2,C3,C4,C5,C6,C7 computerLayer
class B1,B2,B3,B4,B5,B6   baseLayer
class S1,S2,S3            shortTerm
class M1,M2,M3            midTerm
class L1,L2,L3            longTerm