%% --------------------------------------------------------
%%  コンピュータ技術レイヤー × ベースレイヤー 進化図（FIXED）
%% --------------------------------------------------------

flowchart TB

%% === レイヤー間相互作用 ===
subgraph interplay["レイヤー間相互作用"]
    compLayerID(("コンピュータレイヤー")) -- "技術変化波及" --> baseLayerID(("ベースレイヤー"));
end

%% === コンピュータレイヤー（技術階層）の進化 ===
subgraph compLayer["コンピュータレイヤー（技術階層）の進化"]
    direction TB
    C1["1. 物理層<br/>- 真空管 (1940s)<br/>- トランジスタ (1950s)<br/>- 集積回路 (1960s)<br/>- VLSI (1980s)<br/>- ナノスケール (2000s)"] --> C2["2. データ・リンク層<br/>- バッチ処理 (1950s)<br/>- タイムシェアリング (1960s)<br/>- パケット通信 (1970s)<br/>- イーサネット / Wi-Fi (1990s-2000s)"];
    C2["2. データ・リンク層<br/>- バッチ処理 (1950s)<br/>- タイムシェアリング (1960s)<br/>- パケット通信 (1970s)<br/>- イーサネット / Wi-Fi (1990s-2000s)"] --> C3["3. 媒体アクセス制御副層<br/>- 専用回線 (1960s)<br/>- CSMA/CD (1970s)<br/>- 802.11 規格 (1990s)<br/>- モバイルアクセス (2000s)"];
    C3["3. 媒体アクセス制御副層<br/>- 専用回線 (1960s)<br/>- CSMA/CD (1970s)<br/>- 802.11 規格 (1990s)<br/>- モバイルアクセス (2000s)"] --> C4["4. ネットワーク層<br/>- ARPANET (1960s)<br/>- TCP/IP (1970s)<br/>- インターネット商用化 (1990s)<br/>- IPv6 (2000s)"];
    C4["4. ネットワーク層<br/>- ARPANET (1960s)<br/>- TCP/IP (1970s)<br/>- インターネット商用化 (1990s)<br/>- IPv6 (2000s)"] --> C5["5. トランスポート層<br/>- FTP / SMTP (1970s)<br/>- TCP/UDP 標準化 (1980s)<br/>- HTTP/HTTPS (1990s)<br/>- HTTP/2,3 (2010s)"];
    C5["5. トランスポート層<br/>- FTP / SMTP (1970s)<br/>- TCP/UDP 標準化 (1980s)<br/>- HTTP/HTTPS (1990s)<br/>- HTTP/2,3 (2010s)"] --> C6["6. アプリケーション層<br/>- コマンドライン (1970s)<br/>- GUI (1980s)<br/>- ウェブアプリ (1990s)<br/>- モバイルアプリ (2000s)<br/>- AI アプリ (2010s)"];
    C6["6. アプリケーション層<br/>- コマンドライン (1970s)<br/>- GUI (1980s)<br/>- ウェブアプリ (1990s)<br/>- モバイルアプリ (2000s)<br/>- AI アプリ (2010s)"] --> C7["7. ネットワーク・セキュリティ<br/>- 基本認証 (1980s)<br/>- 暗号化 (1990s)<br/>- FW / VPN (2000s)<br/>- ゼロトラスト (2010s)"];
end

%% === ベースレイヤー（社会階層）の変化 ===
subgraph baseLayer["ベースレイヤー（社会階層）の変化"]
    direction TB
    B1["1. NATURE<br/>自然・物理法則<br/>- エネルギー利用拡大<br/>- デジタル物理学の発展"] --> B2["2. CULTURE<br/>文化・認識<br/>- 計算思考の普及<br/>- デジタルネイティブ文化<br/>- グローバル情報共有"];
    B2["2. CULTURE<br/>文化・認識<br/>- 計算思考の普及<br/>- デジタルネイティブ文化<br/>- グローバル情報共有"] --> B3["3. GOVERNANCE<br/>統治・制度<br/>- 電子政府<br/>- デジタルプライバシー法<br/>- サイバーセキュリティ体制"];
    B3["3. GOVERNANCE<br/>統治・制度<br/>- 電子政府<br/>- デジタルプライバシー法<br/>- サイバーセキュリティ体制"] --> B4["4. INFRASTRUCTURE<br/>基盤・インフラ<br/>- 通信インフラ<br/>- データセンター<br/>- クラウドコンピューティング"];
    B4["4. INFRASTRUCTURE<br/>基盤・インフラ<br/>- 通信インフラ<br/>- データセンター<br/>- クラウドコンピューティング"] --> B5["5. COMMERCE<br/>商業・経済<br/>- EC / 電子決済<br/>- プラットフォーム経済<br/>- デジタル広告"];
    B5["5. COMMERCE<br/>商業・経済<br/>- EC / 電子決済<br/>- プラットフォーム経済<br/>- デジタル広告"] --> B6["6. FASHION<br/>流行・一時的現象<br/>- SNS トレンド<br/>- アプリブーム<br/>- Web3.0"];
end

%% === 変化の時代区分 ===
subgraph era["変化の時代区分"]
    earlyID("初期") -- "1940s-1970s" --> matureID("成熟期");
    matureID("成熟期") -- "1980s-2000s" --> ubiqID("遍在期");
    ubiqID("遍在期") -- "2010s-2020s" --> nowID("現在");
end

%% === 初期コンピューティング時代 ===
subgraph earlyEra["初期コンピューティング時代: 1940s-1970s"]
    direction TB
    E1["物理層革新<br/>- 真空管 → 集積回路<br/>- メインフレーム開発"]
    E2["限定的アプリケーション<br/>- 科学 / 軍事計算<br/>- 基幹業務システム"]
    E3["専門家支配<br/>- コンピュータ科学者 / 技術者<br/>- 大企業 / 政府独占"]
end

%% === 普及成熟期 ===
subgraph matureEra["普及成熟期: 1980s-2000s"]
    direction TB
    M1["パーソナルコンピュータ<br/>- IBM PC / Apple<br/>- Windows / Mac OS"]
    M2["インターネット誕生<br/>- WWW / 電子メール<br/>- 初期 EC / 検索エンジン"]
    M3["デジタル文化の萌芽<br/>- BBS / オンラインコミュニティ<br/>- デジタルメディア"]
end

%% === コンピューティング遍在期 ===
subgraph ubiqEra["コンピューティング遍在期: 2010s-2020s"]
    direction TB
    U1["モバイル革命<br/>- スマートフォン普及<br/>- 常時接続文化"]
    U2["クラウド / AI 時代<br/>- SaaS / PaaS<br/>- 機械学習 / 深層学習"]
    U3["社会変革<br/>- デジタルトランスフォーメーション<br/>- プラットフォーム資本主義"]
end

%% --- 時代別の特徴的な波及 ---
C1 -.-> E1;
C2 -.-> E2;
B3 -.-> E3;

C6 -.-> M1;
C4 -.-> M2;
B2 -.-> M3;

C3 -.-> U1;
C6 -.-> U2;
B5 -.-> U3;

%% --- レイヤー間の相互作用 ---
B1 -. "素材科学への要求" .-> C1
C6 -. "ユーザビリティ向上" .-> B2
B3 -. "規制・標準化" .-> C7
C4 -. "インフラ要求" .-> B4
B5 -. "商業的需要" .-> C6

%% --- スタイル定義 ---
classDef computerLayer fill:#d4f1f9,stroke:#058,stroke-width:1px
classDef baseLayer     fill:#e6f9e6,stroke:#292,stroke-width:1px
classDef earlyPeriod   fill:#ffe6cc,stroke:#d79b00,stroke-width:1px
classDef mainPeriod    fill:#fff2cc,stroke:#d6b656,stroke-width:1px
classDef ubiqPeriod    fill:#e1d5e7,stroke:#9673a6,stroke-width:1px

class C1,C2,C3,C4,C5,C6,C7 computerLayer
class B1,B2,B3,B4,B5,B6 baseLayer
class E1,E2,E3 earlyPeriod
class M1,M2,M3 mainPeriod
class U1,U2,U3 ubiqPeriod
